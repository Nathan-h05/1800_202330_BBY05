<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" type="text/css" href="styles/camera.css">
    <title>Upload Page</title>
    <meta name="comp1800 template" content="My 1800 App">

    <!------------------------>
    <!-- Required meta tags -->
    <!------------------------>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!------------------------------------------>
    <!-- Bootstrap Library CSS JS CDN go here -->
    <!------------------------------------------>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous">
    </script>

    <!-------------------------------------------------------->
    <!-- Firebase 8 Library related CSS, JS, JQuery go here -->
    <!-------------------------------------------------------->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/ui/4.8.1/firebase-ui-auth.js"></script> 
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.8.1/firebase-ui-auth.css" />

    <!-------------------------------------------->
    <!-- Other libraries and styles of your own -->
    <style>
        body {
            text-align: center;
        }
        .top {
            margin: 20px 0;
        }
        .bottom {
            position: fixed;
            bottom: 0;
            width: 100%;
            background-color: #f2f2f2;
            padding: 10px;
            text-align: center;
        }
    </style>
    <!-------------------------------------------->
    <!-- <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> -->
    <!-- <link rel="stylesheet" href="./styles/style.css"> -->

</head>

<body>
    <!------------------------------>
    <!-- Your HTML Layout go here -->
    <!------------------------------>

    <!-- our own navbar goes here -->
    <nav id="navbarPlaceholder"></nav>

    <!-- the body of your page goes here -->
       <!-- Upload Page Content -->
       <div style="background-color: antiquewhite;"><h1>Upload a Photo and Add Location</h1></div>
       <!-- Upload form and map here -->
       <br>

       <center> 
       <script>
           // Function to find the latest image file in the folder
           function findLatestImage() {
               let latestImage = new Image();
               let latestImageNumber = 0;
   
               // Assuming images are stored in the /images folder
               const folderPath = '/images/';
               
               // Loop through images to find the latest one
               for (let i = 1; i <= latestImageNumber; i++) {
                   const imageUrl = folderPath + `captured-photo(${i}).png`;
                   let image = new Image();
                   image.src = imageUrl;
                   
                   // Check if the image exists
                   image.onload = function() {
                       latestImageNumber = i;
                       latestImage.src = imageUrl;
                   };
               }
           }
   
           // Call the function to find and display the latest image
           findLatestImage();
       </script>
       <form action="#" method="post" enctype="multipart/form-data">
        <input type="file" id="imageInput" accept="image/*" style="display: none;" />
        
        <img id="preview" src="" alt="Image Preview" style="max-width: 300px; display: none;" /><br>
        <button style="background-color: rgb(135, 135, 242);border-radius: 20%;width: 7%;" type="button" onclick="document.getElementById('imageInput').click();">Choose Image</button>
    </form></center>

    <script>
        document.getElementById('imageInput').addEventListener('change', function() {
            var preview = document.getElementById('preview');
            var file = this.files[0];
            var reader = new FileReader();

            reader.onload = function() {
                preview.src = reader.result;
                preview.style.display = 'block';
            };

            if (file) {
                reader.readAsDataURL(file);
            }
        });
    </script>

       <br><iframe
       width="90%"
       height="400"
       frameborder="0"
       src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d26007.285110424336!2d-123.1207!3d49.2827!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x548673f143a94d51%3A0xa87876e2a2b49b18!2sVancouver%2C%20BC!5e0!3m2!1sen!2sca!4v1554135542509!5m2!1sen!2sca"
       allowfullscreen
   ></iframe>
       <br><br><a style="display: m;" href="cameraPage3.html"><button style="background-color: rgb(59, 114, 218); width:5%;border-radius: 30%;" id="take-photo-button;">  Add  </button></a>
   
    <!-- stuff -->
    

    <!-- our own footer goes here-->
    <nav id="footerPlaceholder"></nav>

    <!---------------------------------------------->
    <!-- Your own JavaScript functions go here    -->
    <!---------------------------------------------->
    <script src="./scripts/firebaseAPI_TEAM99.js"></script>
    <script src="./scripts/skeleton.js"></script>
    <!-- <script src="./scripts/script.js"></script> -->

</body>

</html>
